{"version":3,"sources":["App.jsx","index.js"],"names":["InputBox","props","id","className","onChange","event","items","text","replace","split","filter","item","parseInput","target","value","Control","onClick","onStart","onStop","RouletteItems","selectClass","index","selected","finished","itemList","map","itemLabel","key","select","Item","Display","App","state","handleTextareaChange","bind","this","setState","interval","setInterval","length","max","itemNum","randCnt","Math","floor","random","clearInterval","console","log","countdown","intervalMillsec","React","Component","ReactDOM","render","document","getElementById"],"mappings":"gNAEMA,EAAW,SAAAC,GAab,OACI,yBAAKC,GAAG,WAAWC,UAAU,aACzB,wDACA,8BAAUD,GAAG,YAAYE,SARhB,SAAAC,GACb,IACMC,EATS,SAAAC,GACf,OAAOA,EACFC,QAAQ,YAAa,KAAM,IAAK,KAChCA,QAAQ,WAAY,GAAI,IAAK,KAC7BC,MAAM,cACNC,QAAO,SAAAC,GAAI,MAAa,KAATA,KAINC,CADDP,EAAMQ,OAAOC,OAE1Bb,EAAMG,SAASE,QASjBS,EAAU,SAAAd,GACZ,OACI,yBAAKC,GAAG,UAAUC,UAAU,aACxB,4BAAQa,QAASf,EAAMgB,SAAvB,SACA,4BAAQD,QAASf,EAAMiB,QAAvB,UAKNC,EAAgB,SAAAlB,GAClB,IAAMmB,EAAc,SAAAC,GAChB,OAAIA,IAAUpB,EAAMqB,SACT,eACArB,EAAMsB,SACN,cAEA,iBAMf,OAHctB,EAAMuB,SAASC,KAAI,SAACC,EAAWL,GACzC,OAAO,kBAAC,EAAD,CAAMM,IAAKN,EAAQ,IAAMK,EAAWA,UAAWA,EAAWE,OAAQR,EAAYC,SAKvFQ,EAAO,SAAA5B,GACT,OAAO,yBAAKE,UAAS,eAAUF,EAAM2B,SAAW3B,EAAMyB,YAGpDI,EAAU,SAAA7B,GACZ,IAAMuB,EAAWvB,EAAMuB,UAAY,GACnC,OACI,yBAAKrB,UAAU,uBACX,kBAAC,EAAD,CAAeqB,SAAUA,EAAUF,SAAUrB,EAAMqB,SAAUC,SAAUtB,EAAMsB,aA+E1EQ,E,kDAzEX,WAAY9B,GAAQ,IAAD,8BACf,cAAMA,IACD+B,MAAQ,CACTV,UAAW,EACXhB,MAAO,GACPiB,UAAU,GAEd,EAAKU,qBAAuB,EAAKA,qBAAqBC,KAA1B,gBAC5B,EAAKjB,QAAU,EAAKA,QAAQiB,KAAb,gBACf,EAAKhB,OAAS,EAAKA,OAAOgB,KAAZ,gBATC,E,iEAWE5B,GACjB6B,KAAKC,SAAS,CACVd,UAAW,EACXhB,MAAOA,EACPiB,UAAU,M,gCAGP,IAAD,OAEAc,EAAWC,aAAY,WACzB,EAAKF,UAAS,SAAAJ,GACV,MAAO,CACHV,UAAWU,EAAMV,SAAW,GAAKU,EAAM1B,MAAMiC,aAGtD,KACHJ,KAAKC,SAAS,CACVb,UAAU,EACVc,SAAUA,M,+BAGR,IACeG,EADhB,OAECC,EAAUN,KAAKH,MAAM1B,MAAMiC,OAC3BG,EAAUD,GAFKD,EAEkB,EAAEC,EAFbE,KAAKC,MAAMD,KAAKE,SAAWF,KAAKC,MAAMJ,KAGlEL,KAAKC,UAAS,SAAAJ,GACV,IAAI,EAAKA,MAAMT,SAAf,CACAuB,cAAcd,EAAMK,UACpB,IAAMA,EAAWC,aAAY,WACzB,EAAKF,UAAS,SAAAJ,GAEV,OADAe,QAAQC,IAAR,qBAA0BhB,EAAMiB,YAC5BjB,EAAMiB,UAAY,EACZ,CACFA,UAAWjB,EAAMiB,UAAY,EAC7B3B,UAAWU,EAAMV,SAAW,GAAKU,EAAM1B,MAAMiC,SAGjDO,cAAcd,EAAMK,UACb,CACHA,SAAU,KACVd,UAAU,SAKvB,KACH,MAAO,CACH0B,UAAWP,EACXL,SAAUA,S,+BAKlB,OACI,6BACI,kBAAC,EAAD,CAAUjC,SAAU+B,KAAKF,uBACzB,kBAAC,EAAD,CAAShB,QAASkB,KAAKlB,QAASC,OAAQiB,KAAKjB,OAAQgC,gBAAiB,MACtE,kBAAC,EAAD,CAAS1B,SAAUW,KAAKH,MAAM1B,MAAOgB,SAAUa,KAAKH,MAAMV,SAAUC,SAAUY,KAAKH,MAAMT,gB,GArEvF4B,IAAMC,WCvDxBC,IAASC,OACP,kBAAC,EAAD,MACAC,SAASC,eAAe,U","file":"static/js/main.9c19fb13.chunk.js","sourcesContent":["import React from 'react';\n\nconst InputBox = props => {\n    const parseInput = text => {\n        return text\n            .replace(/\\n(\\s)+\\n/, \"\\n\", 'g', 'm') //0個以上のスペースのみからなる行を削除\n            .replace(/\\n(\\s)+$/, \"\", 'g', 'm')\n            .split(/\\r\\n|\\r|\\n/) //改行コードで分割\n            .filter(item => item !== \"\"); //空行削除\n    }\n    const onChange = event => {\n        const text = event.target.value;\n        const items = parseInput(text)\n        props.onChange(items);\n    }\n    return (\n        <div id=\"inputbox\" className=\"component\">\n            <h2>List of candidate items:</h2>\n            <textarea id=\"inputarea\" onChange={onChange}></textarea>\n        </div>\n    )\n}\nconst Control = props => {\n    return (\n        <div id=\"control\" className=\"component\">\n            <button onClick={props.onStart}>Start</button>\n            <button onClick={props.onStop}>Stop</button>\n        </div>\n    )\n}\n\nconst RouletteItems = props => {\n    const selectClass = index => {\n        if (index !== props.selected) {\n            return \"item-default\";\n        } else if (props.finished) {\n            return \"item-winner\";\n        } else {\n            return \"item-selected\";\n        }\n    }\n    const items = props.itemList.map((itemLabel, index) => {\n        return <Item key={index + \"-\" + itemLabel} itemLabel={itemLabel} select={selectClass(index)} />\n    });\n    return items;\n}\n\nconst Item = props => {\n    return <div className={`item ${props.select}`}>{props.itemLabel}</div>\n}\n\nconst Display = props => {\n    const itemList = props.itemList || [];\n    return (\n        <div className=\"container component\">\n            <RouletteItems itemList={itemList} selected={props.selected} finished={props.finished} />\n        </div>\n    )\n}\n\nclass App extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            selected: -1,\n            items: [],\n            finished: false,\n        };\n        this.handleTextareaChange = this.handleTextareaChange.bind(this);\n        this.onStart = this.onStart.bind(this);\n        this.onStop = this.onStop.bind(this);\n    }\n    handleTextareaChange(items) {\n        this.setState({\n            selected: -1,\n            items: items,\n            finished: false,\n        });\n    }\n    onStart() {\n        // intervalMillsec = intervalMillsec || 1000;\n        const interval = setInterval(() => {\n            this.setState(state => {\n                return {\n                    selected: (state.selected + 1) % state.items.length,\n                }\n            });\n        }, 200);\n        this.setState({\n            finished: false,\n            interval: interval,\n        });\n    }\n    onStop() {\n        const getRandomInt = max => Math.floor(Math.random() * Math.floor(max));\n        const itemNum = this.state.items.length\n        const randCnt = itemNum + getRandomInt(2*itemNum);\n        this.setState(state => {\n            if (this.state.finished) return;\n            clearInterval(state.interval);\n            const interval = setInterval(() => {\n                this.setState(state => {\n                    console.log(`Remaining: ${state.countdown}`)\n                    if (state.countdown > 0) {\n                        return{\n                            countdown: state.countdown - 1,\n                            selected: (state.selected + 1) % state.items.length,\n                        };\n                    } else {\n                        clearInterval(state.interval)\n                        return {\n                            interval: null,\n                            finished: true,\n                        };\n                    }\n                });\n\n            }, 500);\n            return {\n                countdown: randCnt,\n                interval: interval,\n            }\n        });\n    }\n    render() {\n        return (\n            <div>\n                <InputBox onChange={this.handleTextareaChange} />\n                <Control onStart={this.onStart} onStop={this.onStop} intervalMillsec={1000} />\n                <Display itemList={this.state.items} selected={this.state.selected} finished={this.state.finished} />\n            </div>\n        )\n    }\n}\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App.jsx';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);"],"sourceRoot":""}